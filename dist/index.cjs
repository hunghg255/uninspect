"use strict";const defaultOptions={clear:!0,debug:!0,debugTime:3e3,bfcache:!0},EBrowser={Chrome:0,Firefox:1,Safari:2},completion=t=>t?t[0]!=="/"?`/${t}`:t:"/",isUserAgentContains=t=>~navigator.userAgent.toLowerCase().indexOf(t),isString=t=>typeof t=="string",locationChange=(t,e)=>{if(e===EBrowser.Safari){location.replace(t);return}location.href=t};let c=0,n=0;const getChromeRerenderTestFunc=t=>{let e=0;const i=1<<c++;return()=>{n&&!(n&i)||(e++,e===2&&(n|=i,t(),e=1))}},g=t=>{const e=new Error;Object.defineProperty(e,"message",{get(){t()}}),console.log(e)},getChromeTest=t=>{const e=/./;e.toString=getChromeRerenderTestFunc(t);const i=()=>e;i.toString=getChromeRerenderTestFunc(t);const o=new Date;o.toString=getChromeRerenderTestFunc(t),console.log("%c",i,i(),o);const s=getChromeRerenderTestFunc(t);g(s)},getFirefoxTest=t=>{const e=/./;e.toString=t,console.log(e)},getSafariTest=t=>{const e=new Image;Object.defineProperty(e,"id",{get:()=>{t(EBrowser.Safari)}}),console.log(e)};var f=Object.defineProperty,d=(t,e,i)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,r=(t,e,i)=>(d(t,typeof e!="symbol"?e+"":e,i),i);class ConsoleBan{constructor(e){r(this,"_debug"),r(this,"_debugTime"),r(this,"_clear"),r(this,"_bfcache"),r(this,"_callback"),r(this,"_redirect"),r(this,"_write");const{clear:i,debug:o,debugTime:s,callback:a,redirect:l,write:h,bfcache:b}={...defaultOptions,...e};this._debug=o,this._debugTime=s,this._clear=i,this._bfcache=b,this._callback=a,this._redirect=l,this._write=h}clear(){this._clear&&(console.clear=()=>{})}bfcache(){this._bfcache&&(window.addEventListener("unload",()=>{}),window.addEventListener("beforeunload",()=>{}))}debug(){if(this._debug){const e=new Function("debugger");setInterval(e,this._debugTime)}}redirect(e){const i=this._redirect;if(!i)return;if(i.indexOf("http")===0){location.href!==i&&locationChange(i,e);return}const o=location.pathname+location.search;completion(i)!==o&&locationChange(i,e)}callback(){if(!this._callback&&!this._redirect&&!this._write||!window)return;const e=this.fire.bind(this),i=window.chrome||isUserAgentContains("chrome"),o=isUserAgentContains("firefox");if(i){getChromeTest(e);return}if(o){getFirefoxTest(e);return}getSafariTest(e)}write(){const e=this._write;e&&(document.body.innerHTML=isString(e)?e:e.innerHTML)}fire(e){if(this._callback){this._callback.call(null);return}this.redirect(e),!this._redirect&&this.write()}prepare(){this.clear(),this.bfcache(),this.debug()}ban(){this.prepare(),this.callback()}}const init=t=>{new ConsoleBan(t).ban()};typeof window<"u"&&(window.ConsoleBan={init}),exports.init=init;
