const u={clear:!0,debug:!0,debugTime:3e3,bfcache:!0},s={Chrome:0,Firefox:1,Safari:2},w=t=>t?t[0]!=="/"?`/${t}`:t:"/",a=t=>~navigator.userAgent.toLowerCase().indexOf(t),_=t=>typeof t=="string",l=(t,e)=>{if(e===s.Safari){location.replace(t);return}location.href=t};let m=0,c=0;const r=t=>{let e=0;const n=1<<m++;return()=>{c&&!(c&n)||(e++,e===2&&(c|=n,t(),e=1))}},p=t=>{const e=new Error;Object.defineProperty(e,"message",{get(){t()}}),console.log(e)},T=t=>{const e=/./;e.toString=r(t);const n=()=>e;n.toString=r(t);const i=new Date;i.toString=r(t),console.log("%c",n,n(),i);const o=r(t);p(o)},S=t=>{const e=/./;e.toString=t,console.log(e)},C=t=>{const e=new Image;Object.defineProperty(e,"id",{get:()=>{t(s.Safari)}}),console.log(e)};class k{constructor(e){const{clear:n,debug:i,debugTime:o,callback:d,redirect:g,write:f,bfcache:b}={...u,...e};this._debug=i,this._debugTime=o,this._clear=n,this._bfcache=b,this._callback=d,this._redirect=g,this._write=f}clear(){this._clear&&(console.clear=()=>{})}bfcache(){this._bfcache&&(window.addEventListener("unload",()=>{}),window.addEventListener("beforeunload",()=>{}))}debug(){if(this._debug){const e=new Function("debugger");setInterval(e,this._debugTime)}}redirect(e){const n=this._redirect;if(!n)return;if(n.indexOf("http")===0){location.href!==n&&l(n,e);return}const i=location.pathname+location.search;w(n)!==i&&l(n,e)}callback(){if(!this._callback&&!this._redirect&&!this._write||!window)return;const e=this.fire.bind(this),n=window.chrome||a("chrome"),i=a("firefox");if(n){T(e);return}if(i){S(e);return}C(e)}write(){const e=this._write;e&&(document.body.innerHTML=_(e)?e:e.innerHTML)}fire(e){if(this._callback){this._callback.call(null);return}this.redirect(e),!this._redirect&&this.write()}prepare(){this.clear(),this.bfcache(),this.debug()}ban(){this.prepare(),this.callback()}}const h=t=>{new k(t).ban()};typeof window<"u"&&(window.ConsoleBan={init:h});export{h as init};
